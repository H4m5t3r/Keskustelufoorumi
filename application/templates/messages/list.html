{% extends "layout.html" %}

{% block body %}
<ul>
  <li><a href="{{ url_for('messages_count') }}">Count how many messages each user has written</a></li>
</ul>
<b>Messages</b><br>
<br>
  
    {% for message in message %}
    <table>
    <tr>
      <th>{{ message.name }}</th>
      {% for user in account %}
        {% if user.id==message.account_id %}
        <td>{{ user.name }}</td>
        {% endif %}
      {% endfor %}
      <td>{{ message.date_created }}</td>
      {% if message.liked %}
      <td>Liked</td>
      {% else %}
      <td>Not liked</td>
      {% endif %}

      {% if current_user.is_authenticated %}
      <td>
        <form method="POST" action="{{ url_for('messages_set_liked', message_id=message.id) }}">
          <input type="submit" value="Like"/>
        </form>
      </td>
      <td>
        <form method="POST" action="{{ url_for('messages_set_unlike', message_id=message.id) }}">
          <input type="submit" value="Dislike"/>
        </form>
      </td>
      {% if current_user.id==message.account_id %}
      <td>
        <form method="POST" action="{{ url_for('messages_delete', message_id=message.id) }}">
          <input type="submit" value="Delete message"/>
        </form>
      </td>
      {% else %}
        {% if current_user.id==1 %}
        <td>
          <form method="POST" action="{{ url_for('messages_delete', message_id=message.id) }}">
            <input type="submit" value="Delete message"/>
          </form>
        </td>
        {% endif %}
      {% endif %}
    {% endif %}
    </tr>
  </table>
      <t>{{ message.messagetext }}</t>
      <br>
      <br>
    {% endfor %}
  
{% endblock %}
